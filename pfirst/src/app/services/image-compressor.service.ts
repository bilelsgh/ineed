import {Injectable} from "@angular/core";
import {NgxImageCompressService} from "ngx-image-compress";

@Injectable()
export class ImageCompressorService {

  constructor(private imageCompress: NgxImageCompressService) {
  }

  servCompressedURl: any;
  undefinedPicCompressedURL: string = "data:image/png;base64,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";

  compressFile(image) {
    return new Promise( (resolve) => {
      let orientation = -1;
      //this.sizeOfOriginalImage = this.imageCompress.byteCount(image) / (1024 * 1024);
      this.imageCompress.compressFile(image, orientation, 50, 50).then(
        result => {
          this.servCompressedURl = result;
          resolve('success');
        });
    });
  }
}
