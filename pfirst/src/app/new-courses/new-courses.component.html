<div id="jumb" class="jumbotron jumbotron-fluid">
<div class="container">
  <h1 class="display-4" align="center">Pour les courses !</h1>
  <table align="center">

    <div class="col-sm-8 col-sm-offset-2">

      <!--#############PRENOM######################-->
      <form [formGroup]="coursesForm" (ngSubmit)="onSubmitForm()" id="form">


        <!--#############DATE######################-->
        <div class="form-group">
            <div class="form-group">
              <label for="datejour"><h2>Sélectionnez une date et une heure <span style="color:red">*</span></h2>
              </label>
              <p>Jour :</p>
              <input type="date" id="datejour" class="form-control" formControlName="datejour" [min]="this.date" >
              <p>Heure : </p>
                <input type="time" id="dateheure" class="form-control" formControlName="dateheure" >

            </div>

          <!--#############ACCOMPAGNE######################-->
            <div class="form-group">
              <label for="accompagne"><h2>Souhaitez vous que l'on vous accompagne ? <span style="color:red">*</span></h2></label>
              <select id="accompagne" class="form-control" formControlName="accompagne">
                <option value="Oui">Oui !</option>
                <option value="Non">Non !</option>
              </select>
            </div>


          <!--#############BUDGET######################-->
            <div class="input-group mb-3">
              <label for="budget"><h2>Quel est le montant de votre budget ?<span style="color:red">*</span></h2></label>

              <span class="input-group-text">€</span>
              <input type="text" id="budget" class="form-control" formControlName="budget">
              <span class="input-group-text">,00</span>
            </div>


          <!--#############LISTE DE COURSES######################-->
            <div class="form-group">
              <label for="liste"><h2>Ajoutez un élément à la liste des courses<span style="color:red">*</span></h2></label>

              <form (ngSubmit)="ajouterListe(liste)" #liste="ngForm">
                <table>
                  <tr>
                    <td>Produit</td>
                    <td>Quantité</td>
                  </tr>
                  <tr>
                    <td><input type="text" id="liste" name="liste_produit" class="form-control" ngModel style= "width:170px;height: 100%;"></td>
                    <td><input type="text" id="liste_quantite" name="liste_quantite" class="form-control" ngModel style= "width:70px;height: 100%;"></td>
                    <td>
                      <button type="submit" class="btn btn-secondary">Ajouter</button>
                    </td>
                  </tr>
                  <tr>
                    <ul class="list-group">
                      <div *ngFor="let element of this.liste_courses">
                        <table cellpadding="10">
                          <tr>
                            <td>
                              <li id="liste_items" class="list-group-item d-flex justify-content-between align-items-center">
                                {{element.produit}}
                                <span class="badge badge-primary">{{element.quantite}}</span>
                              </li>
                            </td>
                            <td><span style="cursor:pointer" class="badge badge-danger badge-pill"
                                      (click)="supprimeElem(element.produit, element.quantite)">
                                  -</span></td>
                          </tr>
                        </table>
                      </div>
                    </ul>
                  </tr>
                </table>
              </form>
            </div>
          <div class="form-group">



            <label for ="ou" ><h2>Où se fera le service ? <span style="color:red">*</span></h2></label>


              <table width="100%" border="1" cellspacing="1" cellpadding="5" class="geoloc">

                <tr>

                <td> <div *ngIf="add===false  ">
                  <button  type="button" id = "location-button"  (click)= "add=true;loca=false; map=false" class="btn btn-secondary" style= "width:100px;height: 100px;" >Avec votre adresse</button>
                </div>
                <div *ngIf="add===true && loca ===false ">
                  <label for ="city" ><h3>Ville : </h3></label>
                <br>
              <input type="text" id="city" class="form-control" formControlName="city" placeholder="ex: Paris" >
              <br>
              <label for ="adress" ><h3>Adresse :</h3></label>
              <br>
              <input type="text" id="adress" class="form-control" formControlName="adress" placeholder="ex: avenue des Champs Elysées" style= "width:200px;height: 100%;">
                </div>

                </td>
                <td>
                  <span class="badge badge-secondary" style= "width:50px;height: 50px; text-align:center" ><br> <br>OU</span>
                </td>
                <td>
                  <div *ngIf="loca ===false ">
                    <button  type="button" id = "location-button"  (click)= "loca=true; add=false" class="btn btn-secondary" >Avec votre géolocalisation</button>
                  </div>
                  <div *ngIf="add===false && loca ===true ">
                   
                <button  type="button" id = "location-button"  (click)= "getLocation()" class="btn btn-secondary" >Appuyez</button>


                  </div>
                </td>


                </tr>
                <td></td>
                <td></td>
                <td>
                  <div *ngIf="map" style= "width:250px;height: 250px"> <h3>Vous visualisez ce qui sera affiché sur l'annonce, cela vous convient ? <br> Sinon, écrivez votre adresse.</h3><app-mini-map [latitude]="this.info.latitude" [longitude]="this.info.longitude" [zoom]="12" ></app-mini-map></div>
                </td>

                </table>
          </div>


          <!--#############COMMENTAIRES######################-->
            <div class="form group">
              <label for="description"><h2>Commentaire(s) ? <span style="color:red">*</span></h2></label>
              <!--<input type="text" id="description" class="form-control" formControlName="description"> -->
              <textarea class="form-control" aria-label="With textarea" id="description" class="form-control"
                        formControlName="description" placeholder="ex: Vous pourrez venir chez moi"></textarea>
            </div>
          <br>

          <button type="submit" class="btn btn-primary" [disabled]="coursesForm.invalid">Soumettre</button>
          <i><p *ngIf="!coursesForm.valid" style="color:gray">Veuillez remplir tout les champs <span style="color:red">*</span>
          </p></i>
        </div>
      </form>

    </div>


  </table>
</div>
</div>

